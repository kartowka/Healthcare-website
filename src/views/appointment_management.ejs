<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
		/>
		<title>Appointment Management</title>

		<link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css" />
		<link
			href="https://www.jqueryscript.net/css/jquerysctipttop.css"
			rel="stylesheet"
			type="text/css"
		/>

		<link rel="stylesheet" href="/assets/css/bootstrap-datetimepicker.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
		/>
		<link
			href="https://fonts.googleapis.com/css?family=BenchNine:300,400,700"
			rel="stylesheet"
			type="text/css"
		/>
		<link rel="stylesheet" href="/assets/fonts/fontawesome-all.min.css" />
		<link rel="stylesheet" href="/assets/fonts/font-awesome.min.css" />
		<link
			rel="stylesheet"
			href="/assets/fonts/fontawesome5-overrides.min.css"
		/>
		<link rel="stylesheet" href="/assets/css/style.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
		/>

		<link
			rel="stylesheet"
			type="text/css"
			href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
		/>
	</head>

	<body id="page-top">
		<div id="wrapper">
			<div class="d-flex flex-column" id="content-wrapper">
				<%- include('partials/header'); %>
				<% if(typeof alert !='undefined' ) { %>
					<div class="alert alert-success alert-dismissible fade show" role="alert">
						<%= alert %>
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">Ã—</span>
							</button>
					</div>
				<% } %>

				<div id="content">
					<div class="container-fluid">
						<h3 class="text-dark mb-4"></h3>
						<div class="card shadow">
							<div class="card-header py-3">
								<h3 class="text-primary m-0 font-weight-bold">
									Make an Appointment
								</h3>
							</div>
							<div class="card-body">

									<% if(data.id == patient.id){ %>
										<p class="dis" style="color: #3a9ecb; font-size: 22px;">
											It is not possible to make an appointment. 
										</p >
									<% } else if(!(doctor_details.doctor_related_clinics.includes(patient.clinic))){ %>
										<p class="dis" style="color: #3a9ecb; font-size: 22px;">
											Please note, you can't make an appointment with doctor 
											<%=data.first_name%> <%=data.last_name%>,
											because he does not offer services for your clinic. 
										</p >
									<% } else if (doctor_details.working_days.length == 0 || !(doctor_details.start_time)) {%>
										<p class="dis" style="color: #3a9ecb; font-size: 22px;">
											It is not possible to make an appointment with this doctor
										</p>
									<% } else{ %>
										<p class="ena">
											Please note, Doctor <%=data.first_name%>
											works <span id="working_days"><%=doctor_details.working_days%></span>,
											<span id="start_time"><%=doctor_details.start_time%></span> - 
											<span id="end_time"><%=doctor_details.end_time%></span>
										</p>
									
									<% } %>
									<div class="col-md-6">

										<form method="POST">

						
											<input
											style="width: 40%;"
											type='text'
											readonly
											value=""
											name="date"
											class="form-control form_datetime"/>	
											<br>
											<label for="appointment_subject">Please enter the subject of the appointment:</label>
											<textarea
											id='1' 
											class="form-control" 
											style="width: 40%;"
											rows="2"
											cols="50" 
											name="appointment_subject" placeholder="Place your text here"></textarea>
											<br>
											<label for="type">Please select the type of the appointment:</label>
											<select name="type" class="form-control form-control-user" style="width: 40%;">
												<option>frontal</option>
												<option>remote</option>
											</select><br><br>
											<% if(data.id != patient.id  && (doctor_details.doctor_related_clinics.includes(patient.clinic)) && (doctor_details.working_days.length != 0 && (doctor_details.start_time))){ %>
												<div class="form-group"><button class="btn btn-primary btn-sm"
													type="submit" id="btn" >Make an appointment</button>
												</div>
											<% } else { %> 
												<button 
												class="btn btn-primary btn-sm"
												disabled = true;>
												Make an appointment
												</button>

												<% } %>

										</form>

									</div>
									
								</div>
							
						</div>
					</div>
				</div>

				<!-- footer starts here -->
				<%- include('partials/footer'); %>
			</div>
		</div>

		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
		<script src="/assets/js/chart.min.js"></script>
		<script src="/assets/js/bs-init.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
		<script src="/assets/js/theme.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
			crossorigin="anonymous"
		></script>
		<script src="/assets/js/bootstrap-datetimepicker.js"></script>
		<script src="/js/appointment_management.js"></script>
		


	</body>
</html>
